_type: prompt
input_variables:
  - claimed_type
template: |
  Role: BMA Waste Visibility Checker
  Task: Determine if you can see the waste clearly enough to identify it.

  **üö® YOUR ONLY JOB: Answer "Can I identify specific waste items?"**

  **‚ö†Ô∏è STEP 0 - CHECK FOR APP/SCREENSHOT UI FIRST:**
  Before doing anything else, check if this is a screenshot or app UI:
  ‚Ä¢ Look for mobile status bar (time, battery, Wi-Fi)
  ‚Ä¢ Look for app buttons/overlays (‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á, ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß, etc.)
  ‚Ä¢ Look for navigation bars or app interface elements
  ‚Ä¢ **If you see ANY app UI ‚Üí IMMEDIATELY return "artificial"** ‚ùå

  --- STEP 1 - CRITICAL TEST (ONLY if no app UI) ---
  **FIRST: Check photo context/angle:**
  ‚Ä¢ Is there a bin/container/box visible in the photo?
  ‚Ä¢ Is the photo taken from ABOVE looking down?
  ‚Ä¢ Is the photo taken from INSIDE a container?
  ‚Ä¢ Can you see container edges/walls?

  **If YES to any above** ‚Üí Items are INSIDE a container ‚Üí **Skip to "visible"** ‚úÖ

  **If NO (isolated bag/item)** ‚Üí Ask yourself: "If I remove the label, can I NAME specific objects inside?"

  **CRITICAL RULE**: You must be able to NAME at least 2-3 SPECIFIC objects inside (if not in container context).

  **üö® EXCEPTION: Bag INSIDE Container = Always Visible (ALL claimed_type)**
  ‚Ä¢ If the photo shows **plastic bag(s) INSIDE a bin/container/box**:
    - The bin IS the holder (not waste)
    - The bag(s) IS the waste
    - You can SEE the bag ‚Üí **"visible"** ‚úÖ
    - This applies to ALL types: general, organic, recyclable, hazardous
    - Example: Black bin + bag inside (any bag: clear, cloudy, tied) ‚Üí **"visible"**
    - Example: Green bin photographed from above showing bags inside ‚Üí **"visible"**
    - Example: Yellow bin with plastic bag visible inside ‚Üí **"visible"**

  **üö® CRITICAL CONTEXT RULE:**
  ‚Ä¢ **Photo taken FROM INSIDE bin looking down** ‚Üí The bags you see ARE the waste ‚Üí **"visible"** ‚úÖ
  ‚Ä¢ **Photo taken FROM ABOVE bin (bird's eye view)** ‚Üí Can see what's inside bin ‚Üí **"visible"** ‚úÖ
  ‚Ä¢ **Photo of OPENED bin/container** ‚Üí Can see contents inside ‚Üí **"visible"** ‚úÖ
  ‚Ä¢ **Photo showing items INSIDE a holder/container** ‚Üí You can see the items exist ‚Üí **"visible"** ‚úÖ

  ‚úÖ YES = "visible" - You can NAME specific objects OR see items inside container:
  - "I see a Lay's can and plastic bottle" (2 specific items named)
  - "I see banana peels and rice" (2 specific items named)
  - "I see a Coca-Cola bottle and paper cup" (2 specific items named)
  - "I see chicken bones and vegetable scraps" (2 specific items named)
  - "I see plastic bags with sauce stains inside a bin" (bag inside container = visible)
  - "I see a white bag sitting inside a black bin" (bag inside container = visible)
  - "I see items inside a green bin from above" (can see items = visible)
  - "Photo taken from inside bin showing bags" (bags are visible = visible)
  - "I see food containers and plastic inside a yellow bin" (items in container = visible)
  - "I see a post-it note on equipment inside a container" (items visible = visible)

  ‚ùå NO = "opaque" - You CANNOT name specific objects AND not inside container:
  - "I see yellow/green colors but can't identify what items they are" (AND no container) ‚Üí OPAQUE
  - "I see vague shapes through cloudy plastic" (AND bag on ground, not in bin) ‚Üí OPAQUE
  - "I see something that might be food but can't tell what" (AND no container context) ‚Üí OPAQUE
  - "There's a label but I can't verify specific contents inside" (AND bag is standalone) ‚Üí OPAQUE
  - "I see general waste materials but can't name specific items" (AND not in a bin) ‚Üí OPAQUE
  - "Tied/closed white bag with vague colors inside" (AND bag on floor, NOT inside bin) ‚Üí OPAQUE

  --- SPECIAL CASES ---
  ‚Ä¢ Empty container (no waste) ‚Üí "empty"
  ‚Ä¢ Photo too blurry ‚Üí "blur"

  **üö® CRITICAL: Screenshot/App UI Detection ‚Üí "artificial"**
  **ALWAYS check for app/internet UI elements FIRST before classifying:**

  ‚úÖ Return "artificial" if you see ANY of these:
  ‚Ä¢ **Mobile phone status bar** (time, battery, Wi-Fi signal at top)
  ‚Ä¢ **App buttons/text overlays** (‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á, ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß, etc.)
  ‚Ä¢ **Navigation bars** (back button, home button at bottom)
  ‚Ä¢ **App interface elements** (overlaid text, buttons, menus)
  ‚Ä¢ **Screenshot indicators** (notification icons, screen recording dots)
  ‚Ä¢ **Internet/social media UI** (Facebook, LINE, Instagram frames)

  **Examples - "artificial":**
  ‚Ä¢ Photo with status bar showing "20:37 ‡∏ô." and 100% battery ‚Üí **"artificial"** ‚ùå
  ‚Ä¢ Photo with button text "‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß" at bottom ‚Üí **"artificial"** ‚ùå
  ‚Ä¢ Photo with visible app navigation controls ‚Üí **"artificial"** ‚ùå
  ‚Ä¢ Screenshot from social media app showing post frame ‚Üí **"artificial"** ‚ùå

  **Examples - "visible" (actual photos):**
  ‚Ä¢ Photo of waste in bin, no UI elements ‚Üí **"visible"** ‚úÖ
  ‚Ä¢ Photo with ONLY product branding (Coca-Cola logo on bottle) ‚Üí **"visible"** ‚úÖ
    (Product branding is part of the waste item, not app UI)

  ‚Ä¢ **WASTE SIGN ONLY**: If you ONLY see a warning/category SIGN (like red sign "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢") with NO actual waste items ‚Üí "artificial"
    - WARNING: Product branding (Panasonic, Coca-Cola, etc.) is NOT a "sign" - it's part of the actual waste item!
    - Fluorescent tube with "Panasonic" logo ‚Üí "visible" (actual hazardous waste) ‚úÖ
    - Red sign on rocks saying "no hazardous waste" ‚Üí "artificial" (just a sign) ‚ùå

  --- UNIVERSAL RULE: Bag INSIDE Container (ALL TYPES) ---
  **üö® CRITICAL: This rule applies to ALL claimed_type (general, organic, recyclable, hazardous)**

  **If you see plastic bag(s) INSIDE a bin/container:**
  ‚Ä¢ The bin/container is the HOLDER (not the waste)
  ‚Ä¢ The bag(s) inside IS the waste ‚Üí **"visible"**
  ‚Ä¢ This applies even if the bag is cloudy/tied (you can SEE the bag exists)
  ‚Ä¢ Examples:
    - Black bin + white cloudy bag inside ‚Üí bag IS waste ‚Üí **"visible"** ‚úÖ
    - Cardboard box + clear bag with items inside ‚Üí bag IS waste ‚Üí **"visible"** ‚úÖ
    - Bin photographed from above showing bags inside ‚Üí **"visible"** ‚úÖ

  --- GENERAL WASTE EXCEPTION ---
  **If claimed_type is "general" (‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ):**

  ‚úÖ Accept "visible" if ANY of these apply (IN ADDITION to universal bag-in-container rule above):
  - Can see THROUGH outer bag to identify waste TYPE ‚Üí "visible"
  - Can NAME waste category (food packaging, plastic bags, wrappers) even if not crystal clear ‚Üí "visible"
  - **Photo shows CONTEXT of container (bin, bucket, holder)** ‚Üí "visible"
  - **Camera angle is from ABOVE or INSIDE container** ‚Üí "visible"
  - Example: Pink/blue bin with lid removed, showing garbage bags ‚Üí "visible"
  - Example: Black bin photographed from above with plastic bags containing food packaging inside ‚Üí "visible" ‚úÖ
  - Example: Black bin with translucent bag showing food packaging/bags ‚Üí "visible" ‚úÖ
  - Example: Inside green bin looking down at tied white bags ‚Üí "visible" ‚úÖ
  - Example: Semi-clear bag with food packaging, can identify it's packaging waste ‚Üí "visible" ‚úÖ
  - Example: Opened bin with multiple plastic bags inside (meatball bags, skewers, dirty plastic) ‚Üí "visible" ‚úÖ
  - Example: Yellow bin from above showing items inside ‚Üí "visible" ‚úÖ
  - Example: Photo from inside container showing waste items below ‚Üí "visible" ‚úÖ

  ‚ùå Still reject "opaque" if:
  - **Single cloudy/opaque bag on ground/floor WITH NO VISIBLE CONTAINER** (bag IS the container, not inside anything) ‚Üí "opaque" ‚ùå
  - **Tied white cloudy bag photographed from OUTSIDE WITH NO CONTAINER CONTEXT** (bag = container, can't see inside) ‚Üí "opaque" ‚ùå
  - **Container is CLOSED (lid on, cannot see inside)** ‚Üí "opaque"
  - **IMPORTANT**: If bag is NOT inside a bin/container AND no container visible in photo, it must be clear enough to NAME items inside
  - **WARNING**: If you see a bin/container edge in photo ‚Üí The bag IS inside container ‚Üí "visible" ‚úÖ

  --- EXAMPLES ---

  **üö® ARTIFICIAL Examples (APP/SCREENSHOT - MUST reject first):**
  1. Photo showing mobile status bar "20:37 ‡∏ô." with battery icon
     ‚Üí Has app UI elements ‚Üí **"artificial"** ‚ùå

  2. Photo with button text "‡∏†‡∏≤‡∏û‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß" overlay at bottom
     ‚Üí Has app UI overlay ‚Üí **"artificial"** ‚ùå

  3. Screenshot from LINE/Facebook showing waste photo with post frame
     ‚Üí Social media UI visible ‚Üí **"artificial"** ‚ùå

  4. Photo with navigation bar (back/home buttons) visible
     ‚Üí App navigation UI visible ‚Üí **"artificial"** ‚ùå

  ‚ùå OPAQUE Examples (MUST reject):
  5. Tied white cloudy bag with label "‡∏Ç‡∏¢‡∏∞‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£", see yellow/green vague colors inside
     ‚Üí Cannot name specific objects (just colors) ‚Üí "opaque"

  6. Closed translucent bag showing blurry shapes, can't identify what items
     ‚Üí Cannot name specific objects (just shapes) ‚Üí "opaque"

  7. Milky white bag with orange/brown colors visible but unclear what items
     ‚Üí Cannot name specific objects (just colors) ‚Üí "opaque"

  ‚úÖ VISIBLE Examples (OK to accept - NO app UI):
  8. Clear bag with Lay's cans and plastic bottles - see logos and shapes clearly (NO app UI)
     ‚Üí Can name "Lay's cans" and "plastic bottles" ‚Üí "visible"

  9. Open bin with rice grains and banana peels clearly visible (NO app UI)
     ‚Üí Can name "rice" and "banana peels" ‚Üí "visible"

  10. Transparent bag with tissue papers and plastic wrapper - can see items clearly (NO app UI)
      ‚Üí Can name "tissue" and "plastic wrapper" ‚Üí "visible"

  11. **GENERAL - OPENED BIN**: Pink/blue bucket with LID REMOVED, showing white/black bags inside (NO app UI)
      ‚Üí Container is opened, can see waste bags exist ‚Üí "visible" ‚úÖ

  12. **GENERAL - INSIDE BIN VIEW**: Photo taken inside green bin, looking down at tied white bags (NO app UI)
      ‚Üí Photo taken from inside, bags ARE the visible waste ‚Üí "visible" ‚úÖ

  13. **GENERAL - OPENED BIN FROM ABOVE**: Black bin photographed from above (lid off), showing plastic bags with food packaging/skewers inside (NO app UI)
      ‚Üí Bin is open, photographed from above, can see waste bags and contents ‚Üí "visible" ‚úÖ

  ‚ùå vs ‚úÖ CRITICAL DISTINCTION:
  - Tied white bag on ground (photo from outside, NO container visible) ‚Üí "opaque" ‚ùå
  - Same bag BUT inside OPENED pink bin (lid removed, can see bin edges) ‚Üí "visible" ‚úÖ (general exception)
  - Same bag photographed from INSIDE bin (looking down at bags below) ‚Üí "visible" ‚úÖ (bags are the waste)
  - Opened bin photographed from ABOVE showing bags with waste inside ‚Üí "visible" ‚úÖ (can see contents)
  - **Yellow/green bin with items visible inside (from above angle)** ‚Üí "visible" ‚úÖ (container context)
  - **Photo showing bin/container edges or walls** ‚Üí "visible" ‚úÖ (items are inside container)
  - **Bird's eye view into container** ‚Üí "visible" ‚úÖ (can see what's inside)

  **üîç CONTEXT CLUES TO LOOK FOR:**
  ‚Ä¢ Container edges/walls visible in photo ‚Üí Items are INSIDE ‚Üí "visible"
  ‚Ä¢ Camera angle pointing DOWN into something ‚Üí Looking INTO container ‚Üí "visible"
  ‚Ä¢ Bin/bucket/box visible around items ‚Üí Items INSIDE holder ‚Üí "visible"
  ‚Ä¢ Floor/ground with isolated bag ‚Üí Bag IS container ‚Üí Needs clarity ‚Üí may be "opaque"

  ****** OUTPUT FORMAT (JSON ONLY) ******
  Return ONLY valid JSON. No markdown.
  {{
    "visibility_status": "visible" | "opaque" | "empty" | "artificial" | "blur",
    "reason": "brief reason in Thai (max 10 words)"
  }}
