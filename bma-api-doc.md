# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô BMA Integration API

## ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Swagger Documentation

‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà:
```
https://api.geppdata.com/v1/docs/bma/0a70bf9ef2fcb7c2dc6c2b046ebb052c
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô JWT Token

**JWT Token ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoyNiwib3JnYW5pemF0aW9uX2lkIjo4LCJlbWFpbCI6ImJtYUBnZXBwLm1lIiwidHlwZSI6ImludGVncmF0aW9uIiwiZXhwIjoxNzYyMjM4NTA2LCJpYXQiOjE3NjE2MzM3MDZ9.q1v6QIH_14c_sNAomOYvoMYNmmlPhgPBPyTsA4KB1Oo
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
1. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å JWT Token ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô
2. ‡πÉ‡∏ô Swagger UI ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Authorize"** ‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏Ç‡∏ß‡∏≤
3. ‡∏ß‡∏≤‡∏á Token ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á Value (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "Bearer" ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤)
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Authorize"** ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡πÉ‡∏ä‡πâ Token ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `/api/auth/integration` ‡∏Å‡πà‡∏≠‡∏ô

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

**origin_id ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API ‡∏ô‡∏µ‡πâ:**
- ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ **2170** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÅ‡∏ó‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà: **‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ**
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Mock Data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API version ‡∏ô‡∏µ‡πâ
- ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° origin_id ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Ç‡∏ß‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ

**‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ origin_id ‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏à‡∏≤‡∏Å 2170** ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Error

---

## ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### 1. ‡∏ï‡∏±‡∏ß‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Identifiers)

#### `transaction_version` (ext_id_1)
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏£‡∏∏‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÄ‡∏ä‡πà‡∏ô "v2025-Q1", "v2025-Q2"
- **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö**: ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö vYYYY-XX ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏µ‡∏ô‡∏±‡πâ‡∏ô‡πÜ‡πÑ‡∏î‡πâ
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `"v2025-Q1"`, `"v2025-Q2"`, `"v2025-10"`
- **‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

#### `house_id` (ext_id_2)
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà
- **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡πÄ‡∏•‡∏Ç 11 ‡∏´‡∏•‡∏±‡∏Å ‡πÄ‡∏ä‡πà‡∏ô `"00000000001"`, `"00000000002"`
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `"00000000001"` (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 1), `"00000000123"` (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 123)
- **‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•**: ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠

#### `origin_id`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏£‡∏´‡∏±‡∏™‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢
- **‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ**: **2170 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô**
- **origin_name**: "‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ"
- **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**:
  - ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ origin_id 2170 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BMA
  - ‡∏£‡∏´‡∏±‡∏™ 2170 ‡πÅ‡∏ó‡∏ô‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Mock Data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API version ‡∏ô‡∏µ‡πâ
  - ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° origin_id ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Ç‡∏ß‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ

### 2. ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞ (Material Types)

| ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© | ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ | material_id | ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô API |
|----------------|-------------|-------------|-----------|
| **general** | ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ | 94 | `"general"` |
| **organic** | ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå/‡∏≠‡∏≤‡∏´‡∏≤‡∏£ | 77 | `"organic"` |
| **recyclable** | ‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• | 298 | `"recyclable"` |
| **hazardous** | ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ | 113 | `"hazardous"` |

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- **general**: ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ
- **organic**: ‡∏Ç‡∏¢‡∏∞‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å ‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏®‡∏©‡∏û‡∏∑‡∏ä
- **recyclable**: ‡∏Ç‡∏¢‡∏∞‡πÅ‡∏´‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å
- **hazardous**: ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ

### 3. Pagination (‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤)

#### `limit`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤
- **‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô**: 100
- **‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î**: 1000
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `?limit=50` (‡πÅ‡∏™‡∏î‡∏á 50 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤)

#### `page`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤
- **‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô**: 1
- **‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å**: 1 (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà 1)
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `?page=2` (‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà 2)

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Pagination ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤:**
```json
{
  "pagination": {
    "page": 1,              // ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    "limit": 100,           // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤
    "total": 250,           // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    "total_pages": 3,       // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    "has_next": true,       // ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    "has_prev": false       // ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  }
}
```

### 4. Quota ‡πÅ‡∏•‡∏∞ Usage (‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

#### `create_transaction_limit`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á Transaction ‡πÑ‡∏î‡πâ
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢**: ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- **‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å**: `/api/integration/bma/usage`

#### `create_transaction_usage`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Transaction
- **‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì**:
  - ‚úÖ **‡∏ô‡∏±‡∏ö**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Transaction **‡πÉ‡∏´‡∏°‡πà** (create)
  - ‚ùå **‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Transaction ‡πÄ‡∏î‡∏¥‡∏° (update)
  - ‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏ï‡πà‡∏≠ 1 house_id ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: ‡∏™‡πà‡∏á 10 ‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà = ‡πÄ‡∏û‡∏¥‡πà‡∏° 10, ‡∏™‡πà‡∏á 10 ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏° (‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó) = ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°
- **‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å**: `/api/integration/bma/usage`

#### `ai_audit_limit`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ AI Audit ‡πÑ‡∏î‡πâ
- **‡∏´‡∏ô‡πà‡∏ß‡∏¢**: ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- **‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å**: `/api/integration/bma/usage`

#### `ai_audit_usage`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ AI Audit ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
- **‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì**:
  - ‚úÖ **‡∏ô‡∏±‡∏ö**: ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á Transaction ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö AI Audit
  - ‡∏ô‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà (create) ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó (update)
  - ‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏ï‡πà‡∏≠ 1 Transaction ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Audit
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Audit 5 Transaction = ‡πÄ‡∏û‡∏¥‡πà‡∏° 5
- **‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å**: `/api/integration/bma/usage`

### 5. Audit Status ‡πÅ‡∏•‡∏∞ Violations

#### `ai_audit` (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI Audit)
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢ AI
- **‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ**:
  - `"null"` - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
  - `"queued"` - ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
  - `"approved"` - ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
  - `"rejected"` - ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
  - `"no_action"` - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£

**‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡πÉ‡∏ä‡πâ `ai_audit` ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏ó‡∏ô `status`

#### `status` (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Ç‡∏≠‡∏á Transaction
- **‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ**: pending, approved, rejected, completed
- **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `ai_audit` ‡πÅ‡∏ó‡∏ô

#### `overall_violations`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô (‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞)
- **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö**: Array ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:
```json
"overall_violations": [
  "‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà",
  "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"
]
```

#### `violations` (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞)
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞
- **‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á**: ‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞‡πÉ‡∏ô materials
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:
```json
"materials": {
  "general": {
    "image_url": "...",
    "violations": [
      "‡∏û‡∏ö‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏õ‡∏ô‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
      "‡∏Ç‡∏¢‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"
    ]
  }
}
```

#### `image_url`
- **‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£**: URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏¢‡∏∞
- **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö**: URL ‡πÅ‡∏ö‡∏ö S3 ‡∏´‡∏£‡∏∑‡∏≠ HTTPS
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `"https://s3.example.com/bma/house001-general.jpg"`
- **‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á**: ‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞
- **‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**:
  - **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Public URL** ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Authentication
  - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ AI Audit
  - ‡∏´‡∏≤‡∏Å URL ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ ‡∏Å‡∏≤‡∏£ Audit ‡∏à‡∏∞‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
  - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ S3 Presigned URL ‡∏´‡∏£‡∏∑‡∏≠ Public Bucket

---

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß

### 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£ Audit

**Endpoint:** `GET /api/integration/bma/audit_status`

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á Transaction ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 1 ‡∏õ‡∏µ

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Swagger UI
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **GET /api/integration/bma/audit_status**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Try it out"**
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Execute"**

**Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**
```json
{
  "success": true,
  "data": {
    "start_date": "2024-10-27",
    "num_transactions": 150,
    "ai_audit": {
      "not_audit": 45,      // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à
      "queued": 30,         // ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à
      "approved": 50,       // ‡∏ú‡πà‡∏≤‡∏ô
      "rejected": 25        // ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
    },
    "actual_status": {
      "pending": 60,        // ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
      "approved": 70,       // ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
      "rejected": 20        // ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
    }
  }
}
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
- `start_date`: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö (1 ‡∏õ‡∏µ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á)
- `num_transactions`: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Transaction ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- `ai_audit`: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢ AI
- `actual_status`: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á Transaction

---

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**Endpoint:** `GET /api/integration/bma/usage`

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏î‡∏π‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:**
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Swagger UI
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **GET /api/integration/bma/usage**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Try it out"**
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Execute"**

**Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**
```json
{
  "success": true,
  "data": {
    "create_transaction_limit": 1000,    // ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
    "create_transaction_usage": 450,     // ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
    "ai_audit_limit": 100,               // ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ AI
    "ai_audit_usage": 35                 // ‡πÉ‡∏ä‡πâ AI ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
  }
}
```

**‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á Transaction ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å: `1000 - 450 = 550 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ AI Audit ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å: `100 - 35 = 65 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`

**‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:**
- ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Error ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤
- ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô

---

### 3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞ (Batch Upload)

**Endpoint:** `POST /api/integration/bma/transaction`

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞‡∏ó‡∏µ‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

**üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:**
- **‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÜ house_id ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ** ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Batch Processing)
- **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1,000 house_id ‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
- ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1,000 ‡∏ö‡πâ‡∏≤‡∏ô ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
```json
{
  "batch": {
    "v2025-Q1": {                    // transaction_version
      "2170": {                      // origin_id (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô 2170 = ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ)
        "00000000001": {             // house_id (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà)
          "timestamp": "2025-10-23T08:30:00+07:00",
          "material": {
            "general": {             // ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
              "image_url": "https://s3.example.com/bma/house001-general.jpg"
            },
            "recyclable": {          // ‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•
              "image_url": "https://s3.example.com/bma/house001-recyclable.jpg"
            }
          }
        },
        "00000000002": {             // ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2
          "timestamp": "2025-10-23T09:15:00+07:00",
          "material": {
            "organic": {             // ‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå
              "image_url": "https://s3.example.com/bma/house002-organic.jpg"
            }
          }
        }
      }
    }
  }
}
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô Swagger:**
1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **POST /api/integration/bma/transaction**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Try it out"**
3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Request body ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô
4. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô:
   - `transaction_version` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
   - `house_id` ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (11 ‡∏´‡∏•‡∏±‡∏Å)
   - `timestamp` ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏¢‡∏∞
   - `image_url` ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏£‡∏¥‡∏á
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Execute"**

**Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**
```json
{
  "success": true,
  "message": "Processed 2 transactions",
  "results": {
    "processed": 2,               // ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    "created": 2,                 // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
    "updated": 0,                 // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
    "errors": []                  // ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
  },
  "subscription_usage": {
    "create_transaction_limit": 1000,
    "create_transaction_usage": 452,     // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 2
    "ai_audit_limit": 100,
    "ai_audit_usage": 35
  }
}
```

**‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ Error:**
```json
{
  "success": true,
  "results": {
    "processed": 2,
    "created": 1,
    "updated": 1,
    "errors": [
      {
        "transaction_version": "v2025-Q1",
        "house_id": "00000000003",
        "error": "Invalid timestamp format"
      }
    ]
  }
}
```

**‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:**
- ‡πÉ‡∏ä‡πâ `origin_id` ‡πÄ‡∏õ‡πá‡∏ô **2170** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- `timestamp` ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ISO 8601 ‡∏û‡∏£‡πâ‡∏≠‡∏° timezone
- `image_url` **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Public URL** ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á authentication
- ‡∏ñ‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥ (transaction_version + house_id ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô) ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£**‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó**

---

### 4. ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞ (List)

**Endpoint:** `GET /api/integration/bma/transaction`

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤

**Parameters:**
- `limit` (optional): ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 100, ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 1000)
- `page` (optional): ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 1)
- `transaction_version` (optional): ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∏‡πà‡∏ô
- `origin_id` (optional): ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**

**‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (100 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£):**
```
GET /api/integration/bma/transaction
```

**‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà 2, ‡πÅ‡∏™‡∏î‡∏á 50 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:**
```
GET /api/integration/bma/transaction?page=2&limit=50
```

**‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏∏‡πà‡∏ô v2025-Q1:**
```
GET /api/integration/bma/transaction?transaction_version=v2025-Q1
```

**‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏∏‡πà‡∏ô v2025-Q1 ‡∏à‡∏≤‡∏Å origin 2170 ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà 3:**
```
GET /api/integration/bma/transaction?transaction_version=v2025-Q1&origin_id=2170&page=3&limit=100
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Swagger:**
1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **GET /api/integration/bma/transaction**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Try it out"**
3. ‡∏Å‡∏£‡∏≠‡∏Å Parameters ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Execute"**

**Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**
```json
{
  "success": true,
  "data": {
    "transactions": {
      "v2025-Q1": {                      // transaction_version
        "2170": {                        // origin_id
          "00000000001": {               // house_id
            "audit": {
              "status": "pending",
              "ai_audit": "approved",    // ‚≠ê ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏Å
              "overall_violations": [
                "‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô"           // ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô
              ],
              "materials": {
                "general": {
                  "image_url": "https://...",
                  "violations": [        // ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
                    "‡∏û‡∏ö‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏õ‡∏ô"
                  ]
                },
                "organic": {
                  "image_url": "https://...",
                  "violations": []
                }
              }
            }
          }
        }
      }
    },
    "origins": {
      "2170": "‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ"   // ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏∏‡∏î‡∏£‡∏±‡∏ö
    },
    "pagination": {
      "page": 1,
      "limit": 100,
      "total": 250,
      "total_pages": 3,
      "has_next": true,
      "has_prev": false
    }
  }
}
```

**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
```
transactions
‚îî‚îÄ‚îÄ [transaction_version]
    ‚îî‚îÄ‚îÄ [origin_id]
        ‚îî‚îÄ‚îÄ [house_id]
            ‚îî‚îÄ‚îÄ audit
                ‚îú‚îÄ‚îÄ status: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                ‚îú‚îÄ‚îÄ ai_audit: ‚≠ê ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI (‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ)
                ‚îú‚îÄ‚îÄ overall_violations: ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô
                ‚îî‚îÄ‚îÄ materials
                    ‚îú‚îÄ‚îÄ general
                    ‚îÇ   ‚îú‚îÄ‚îÄ image_url
                    ‚îÇ   ‚îî‚îÄ‚îÄ violations
                    ‚îú‚îÄ‚îÄ organic
                    ‚îú‚îÄ‚îÄ recyclable
                    ‚îî‚îÄ‚îÄ hazardous
```

**‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ:**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏î‡πâ‡∏ß‡∏¢ `ai_audit` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà `status`
- `overall_violations` = ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Ç‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô
- `violations` ‡πÉ‡∏ô materials = ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞
- ‡∏ñ‡πâ‡∏≤ `violations` ‡πÄ‡∏õ‡πá‡∏ô `[]` = ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

---

### 5. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á

**Endpoint:** `GET /api/integration/bma/transaction/{transaction_version}/{house_id}`

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

**Parameters:**
- `transaction_version`: ‡∏£‡∏∏‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô "v2025-Q1")
- `house_id`: ‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "00000000001")

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**

**‡∏î‡∏π‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 1 ‡∏£‡∏∏‡πà‡∏ô v2025-Q1:**
```
GET /api/integration/bma/transaction/v2025-Q1/00000000001
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Swagger:**
1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **GET /api/integration/bma/transaction/{transaction_version}/{house_id}**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Try it out"**
3. ‡∏Å‡∏£‡∏≠‡∏Å `transaction_version` ‡πÄ‡∏ä‡πà‡∏ô `v2025-Q1`
4. ‡∏Å‡∏£‡∏≠‡∏Å `house_id` ‡πÄ‡∏ä‡πà‡∏ô `00000000001`
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Execute"**

**Response ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:**
```json
{
  "success": true,
  "data": {
    "transaction_version": "v2025-Q1",
    "house_id": "00000000001",
    "origin_id": "2170",
    "origin_name": "‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ",
    "audit": {
      "status": "pending",
      "ai_audit": "rejected",              // ‚≠ê ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI
      "overall_violations": [
        "‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà",
      ],
      "materials": {
        "general": {
          "image_url": "https://s3.example.com/bma/house001-general.jpg",
          "violations": [
            "‡∏û‡∏ö‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏õ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
          ]
        },
        "recyclable": {
          "image_url": "https://s3.example.com/bma/house001-recyclable.jpg",
          "violations": []                 // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
        },
        "organic": {
          "image_url": null,               // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ
          "violations": []
        },
        "hazardous": {
          "image_url": null,
          "violations": []
        }
      }
    }
  }
}
```

**‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**

**‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- `ai_audit = "rejected"` ‚Üí ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô AI Audit
- `overall_violations` ‡∏°‡∏µ 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô
- ‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (general) ‡∏°‡∏µ `violations` 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
- ‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏• (recyclable) ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

**‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
2. ‡∏ñ‡πà‡∏≤‡∏¢‡∏õ‡πâ‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô
3. ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
4. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà (POST) ‡∏î‡πâ‡∏ß‡∏¢ transaction_version ‡πÅ‡∏•‡∏∞ house_id ‡πÄ‡∏î‡∏¥‡∏° (‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó)

---

## ‡∏Å‡∏£‡∏ì‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà 1: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà 10 ‡∏ö‡πâ‡∏≤‡∏ô

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤:**
   ```
   GET /api/integration/bma/usage
   ```
   ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `create_transaction_usage` + 10 ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô `create_transaction_limit`

2. **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
   ```json
   {
     "batch": {
       "v2025-Q1": {
         "2170": {
           "00000000001": { "timestamp": "...", "material": {...} },
           "00000000002": { "timestamp": "...", "material": {...} },
           ...
           "00000000010": { "timestamp": "...", "material": {...} }
         }
       }
     }
   }
   ```

3. **‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
   ```
   POST /api/integration/bma/transaction
   ```

4. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•:**
   - ‡∏î‡∏π `results.created` ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô 10
   - ‡∏î‡∏π `results.errors` ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î

---

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô AI Audit

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥:**
   ```
   GET /api/integration/bma/audit_status
   ```
   ‡∏î‡∏π `ai_audit.rejected` ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô

2. **‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:**
   ```
   GET /api/integration/bma/transaction?limit=1000
   ```

3. **‡∏Å‡∏£‡∏≠‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°:** ‡∏´‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà `ai_audit = "rejected"`

4. **‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:**
   ```
   GET /api/integration/bma/transaction/v2025-Q1/00000000123
   ```
   ‡∏î‡∏π `overall_violations` ‡πÅ‡∏•‡∏∞ `violations` ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞

5. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÉ‡∏´‡∏°‡πà:**
   ```json
   {
     "batch": {
       "v2025-Q1": {
         "2170": {
           "00000000123": {
             "timestamp": "2025-10-24T10:00:00+07:00",
             "material": {
               "general": {
                 "image_url": "https://... (‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà)"
               }
             }
           }
         }
       }
     }
   }
   ```

---

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà 3: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∏‡πà‡∏ô:**
   ```
   GET /api/integration/bma/transaction?transaction_version=v2025-10&limit=1000
   ```

2. **‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏Å‡∏¥‡∏ô 1000 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:**
   ```
   GET /api/integration/bma/transaction?transaction_version=v2025-10&page=1&limit=1000
   GET /api/integration/bma/transaction?transaction_version=v2025-10&page=2&limit=1000
   ...
   ```
   ‡∏î‡∏π‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ `pagination.has_next = false`

3. **‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:** ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å transaction ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `ai_audit` status

---

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà 4: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å (‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1,000 ‡∏ö‡πâ‡∏≤‡∏ô)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå:** ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 2,500 ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£:** ‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1,000 ‡∏ö‡πâ‡∏≤‡∏ô

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤:**
   ```
   GET /api/integration/bma/usage
   ```
   ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ quota ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ (2,500 ‡∏ö‡πâ‡∏≤‡∏ô)

2. **‡πÅ‡∏ö‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏ä‡∏∏‡∏î:**
   - ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 1: ‡∏ö‡πâ‡∏≤‡∏ô 1-1,000 (1,000 ‡∏ö‡πâ‡∏≤‡∏ô)
   - ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 2: ‡∏ö‡πâ‡∏≤‡∏ô 1,001-2,000 (1,000 ‡∏ö‡πâ‡∏≤‡∏ô)
   - ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 3: ‡∏ö‡πâ‡∏≤‡∏ô 2,001-2,500 (500 ‡∏ö‡πâ‡∏≤‡∏ô)

3. **‡∏™‡πà‡∏á‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 1 (1,000 ‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏£‡∏Å):**
   ```json
   POST /api/integration/bma/transaction
   {
     "batch": {
       "v2025-Q1": {
         "2170": {
           "00000000001": { "timestamp": "...", "material": {...} },
           "00000000002": { "timestamp": "...", "material": {...} },
           ...
           "00000001000": { "timestamp": "...", "material": {...} }
         }
       }
     }
   }
   ```
   **Response:**
   ```json
   {
     "success": true,
     "message": "Processed 1000 transactions",
     "results": {
       "processed": 1000,
       "created": 1000,
       "updated": 0,
       "errors": []
     }
   }
   ```

4. **‡∏™‡πà‡∏á‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 2 (1,000 ‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ):**
   ```json
   POST /api/integration/bma/transaction
   {
     "batch": {
       "v2025-Q1": {
         "2170": {
           "00000001001": { "timestamp": "...", "material": {...} },
           "00000001002": { "timestamp": "...", "material": {...} },
           ...
           "00000002000": { "timestamp": "...", "material": {...} }
         }
       }
     }
   }
   ```
   **Response:**
   ```json
   {
     "success": true,
     "message": "Processed 1000 transactions",
     "results": {
       "processed": 1000,
       "created": 1000,
       "updated": 0,
       "errors": []
     }
   }
   ```

5. **‡∏™‡πà‡∏á‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 3 (500 ‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢):**
   ```json
   POST /api/integration/bma/transaction
   {
     "batch": {
       "v2025-Q1": {
         "2170": {
           "00000002001": { "timestamp": "...", "material": {...} },
           "00000002002": { "timestamp": "...", "material": {...} },
           ...
           "00000002500": { "timestamp": "...", "material": {...} }
         }
       }
     }
   }
   ```
   **Response:**
   ```json
   {
     "success": true,
     "message": "Processed 500 transactions",
     "results": {
       "processed": 500,
       "created": 500,
       "updated": 0,
       "errors": []
     }
   }
   ```

6. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏°:**
   - ‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 1,000 + 1,000 + 500 = 2,500 ‡∏ö‡πâ‡∏≤‡∏ô
   - `create_transaction_usage` ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 2,500
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `errors` ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ response

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á:**
- ‚úÖ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Request Timeout (‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤)
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Error ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô (‡∏£‡∏π‡πâ‡∏ä‡∏∏‡∏î‡πÑ‡∏´‡∏ô‡∏ú‡∏¥‡∏î)
- ‚úÖ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Retry ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
- ‚úÖ ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á:**
```javascript
async function sendBatchInChunks(allHouses, chunkSize = 1000) {
  const results = {
    totalSent: 0,
    totalCreated: 0,
    totalUpdated: 0,
    allErrors: []
  };

  // ‡πÅ‡∏ö‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô chunks
  for (let i = 0; i < allHouses.length; i += chunkSize) {
    const chunk = allHouses.slice(i, i + chunkSize);
    console.log(`Sending chunk ${Math.floor(i/chunkSize) + 1}...`);

    // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° batch data
    const batchData = {
      batch: {
        "v2025-Q1": {
          "2170": {}
        }
      }
    };

    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô
    chunk.forEach(house => {
      batchData.batch["v2025-Q1"]["2170"][house.id] = {
        timestamp: house.timestamp,
        material: house.material
      };
    });

    // ‡∏™‡πà‡∏á request
    try {
      const response = await fetch('/api/integration/bma/transaction', {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_JWT_TOKEN',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(batchData)
      });

      const data = await response.json();

      // ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
      results.totalSent += data.results.processed;
      results.totalCreated += data.results.created;
      results.totalUpdated += data.results.updated;
      results.allErrors.push(...data.results.errors);

      console.log(`‚úÖ Chunk ${Math.floor(i/chunkSize) + 1} done: ${data.results.created} created`);

    } catch (error) {
      console.error(`‚ùå Chunk ${Math.floor(i/chunkSize) + 1} failed:`, error);
      results.allErrors.push({
        chunk: Math.floor(i/chunkSize) + 1,
        error: error.message
      });
    }

    // ‡∏û‡∏±‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ chunk (optional)
    await new Promise(resolve => setTimeout(resolve, 1000));
  }

  return results;
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
const allHouses = [
  { id: "00000000001", timestamp: "...", material: {...} },
  { id: "00000000002", timestamp: "...", material: {...} },
  // ... 2,500 ‡∏ö‡πâ‡∏≤‡∏ô
];

const results = await sendBatchInChunks(allHouses, 1000);
console.log('Summary:', results);
```

**‡∏™‡∏£‡∏∏‡∏õ:**
- üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å = ‡πÅ‡∏ö‡πà‡∏á‡∏™‡πà‡∏á
- üî¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1,000 ‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‚è±Ô∏è ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout
- üîç ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° error ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô

---

## ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥

1. **‡πÉ‡∏ä‡πâ `ai_audit` ‡πÅ‡∏ó‡∏ô `status`**
   ```javascript
   // ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ
   if (transaction.audit.ai_audit === "approved") {
     // ‡∏ú‡πà‡∏≤‡∏ô
   }

   // ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‚ùå
   if (transaction.audit.status === "approved") {
     // ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ú‡∏• AI
   }
   ```

2. **‡πÉ‡∏ä‡πâ house_id ‡πÅ‡∏ö‡∏ö 11 ‡∏´‡∏•‡∏±‡∏Å**
   ```
   ‚úÖ "00000000001", "00000000123"
   ‚ùå "HOUSE-001", "1", "H001"
   ```

3. **‡πÉ‡∏ä‡πâ origin_id ‡πÄ‡∏õ‡πá‡∏ô 2170 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô**
   ```json
   ‚úÖ "2170"  // ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏ô‡∏ó‡∏£‡∏µ (Mock Data)
   ‚ùå "2171", "1234", ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
   ```

4. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å**

5. **‡∏£‡∏∞‡∏ö‡∏∏ timestamp ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á**
   ```
   ‚úÖ "2025-10-23T08:30:00+07:00"  (ISO 8601 + timezone)
   ‚ùå "2025-10-23 08:30:00"
   ‚ùå "23/10/2025"
   ```

6. **‡πÉ‡∏ä‡πâ image_url ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ**
   ```
   ‚úÖ "https://s3.amazonaws.com/bucket/image.jpg"  (Public URL)
   ‚úÖ "https://storage.googleapis.com/bucket/image.jpg"  (Public GCS)
   ‚úÖ "https://s3.example.com/image.jpg?AWSAccessKeyId=..."  (Presigned URL)
   ‚ùå "file:///local/path/image.jpg"  (Local file)
   ‚ùå "https://private.example.com/image.jpg"  (‡∏ï‡πâ‡∏≠‡∏á authentication)
   ```
   **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ AI Audit

### ‚ö†Ô∏è ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á

1. **‡∏™‡πà‡∏á origin_id ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 2170**
   - ‡∏à‡∏∞‡πÑ‡∏î‡πâ Error: "Only origin_id 2170 is allowed for BMA integration"

2. **‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à**
   - ‡∏ñ‡πâ‡∏≤ transaction_version + house_id ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô = ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏à‡∏£‡∏¥‡∏á

3. **‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô violations**
   - AI Audit ‡∏≠‡∏≤‡∏à reject ‡πÅ‡∏ï‡πà `overall_violations` ‡πÅ‡∏•‡∏∞ `violations` ‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏
   - ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

4. **‡πÉ‡∏ä‡πâ limit ‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô**
   - limit=1000 ‡∏à‡∏∞‡∏ä‡πâ‡∏≤‡∏Å‡∏ß‡πà‡∏≤ limit=100
   - ‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

5. **‡πÉ‡∏ä‡πâ image_url ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ**
   - URL ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Public ‡∏´‡∏£‡∏∑‡∏≠ Presigned URL ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ
   - ‡∏ñ‡πâ‡∏≤ URL ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ AI Audit ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ URL ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏) ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á

---

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß

```javascript
// 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
const response = await fetch('/api/integration/bma/transaction?limit=100');
const data = await response.json();

// 2. ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡πâ‡∏≤‡∏ô
for (const version in data.data.transactions) {
  for (const origin in data.data.transactions[version]) {
    for (const houseId in data.data.transactions[version][origin]) {
      const house = data.data.transactions[version][origin][houseId];
      const audit = house.audit;

      // 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI Audit
      if (audit.ai_audit === "rejected") {
        console.log(`‡∏ö‡πâ‡∏≤‡∏ô ${houseId} ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô AI Audit`);

        // 4. ‡∏î‡∏π‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô
        if (audit.overall_violations.length > 0) {
          console.log("‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:", audit.overall_violations);
        }

        // 5. ‡∏î‡∏π‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞
        for (const materialType in audit.materials) {
          const material = audit.materials[materialType];
          if (material.violations.length > 0) {
            console.log(`‡∏õ‡∏±‡∏ç‡∏´‡∏≤${materialType}:`, material.violations);
          }
        }
      }
    }
  }
}
```

---

## ‡∏™‡∏£‡∏∏‡∏õ

### API ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß

| Endpoint | Method | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå |
|----------|--------|-------------|
| `/audit_status` | GET | ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ Audit |
| `/usage` | GET | ‡∏î‡∏π‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤ |
| `/transaction` | POST | ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞ (batch) |
| `/transaction` | GET | ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î |
| `/transaction/{version}/{id}` | GET | ‡∏î‡∏π‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á |

### ‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥

- **origin_id**: 2170 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **house_id**: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 11 ‡∏´‡∏•‡∏±‡∏Å (00000000001)
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‡πÉ‡∏ä‡πâ `ai_audit` ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà `status`
- **‡∏Ç‡∏¢‡∏∞**: general, organic, recyclable, hazardous

### Link ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

- **Swagger UI**: https://api.geppdata.com/v1/docs/bma/0a70bf9ef2fcb7c2dc6c2b046ebb052c
- **JWT Token**: [‡πÉ‡∏ä‡πâ Token ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÑ‡∏ß‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô]

---

**‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢:**
- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô GEPP Sa-Ard 
